'use strict';

const src = './html_src/';
const fs = require('fs');

var obj = {};
var index = 0;

module.exports = function(){

/*
  fs.readdir(src, (err, files) => {
    files.forEach((file, index) => {
      obj[index] = file;

      fs.writeFile('./guide_src/file_list.json', JSON.stringify(obj), function(err) {
        if(err) throw err;
        console.log('File write completed');
      });
    });
  });

  fs.readdir(src, function(err, files){
    files.forEach(function(file, index){
      obj[index] = file;

      fs.writeFile('./guide_src/file_list.json', JSON.stringify(obj), function(err) {
        if(err) throw err;
        console.log('File write completed');
      });
    });
  });
*/

  fs.readdirSync(src).filter(function(file) {
    if(file.indexOf(".html")>-1) {
      obj[index] = file;

      fs.writeFile('./data_src/file_list.json', JSON.stringify(obj), function (err) {
        if (err) throw err;
        console.log('File write completed');
      });

      index++;
    }
  });

};
